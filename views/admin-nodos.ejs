<section class="p-6 flex-1 overflow-auto">
  <div class="max-w-7xl mx-auto">

    <!-- Botón para agregar nodo -->
    <div class="flex justify-end mb-4">
      <a href="/admin/nuevonodo"
        class="flex items-center space-x-2 bg-[#D87E0A] hover:bg-[#b56408] text-white text-sm font-semibold rounded px-4 py-2 shadow transition">
        <i class="fas fa-plus"></i>
        <span>Agregar Nodo</span>
      </a>
    </div>

    <!-- Grilla de nodos -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <% if (nodos.length > 0) { %>
        <% nodos.forEach(nodo => { %>
          <article class="bg-white rounded-lg shadow-md relative pt-3 pb-6 px-6 border-t-4 border-[#D87E0A]">

            <!-- Encabezado -->
            <div class="flex justify-between text-xs text-[#2B2B2B] font-light mb-1">
              <div><%= nodo.nodo_id %> (<%= nodo.tipo %>)</div>
              <div>
                <% if (nodo.colmena_id) { %>
                  Colmena: <%= nodo.colmena_id %>
                <% } else if (nodo.estacion_id) { %>
                  Estación: <%= nodo.estacion_id %>
                <% } else { %>
                  Sin asignar
                <% } %>
              </div>
            </div>

            <!-- Descripción -->
            <p class="text-sm font-semibold text-gray-700 mb-3">
              <%= nodo.nodo_desc %>
            </p>

            <!-- Acciones -->
            <div class="flex space-x-3">
              <a href="/admin/nodos/view/<%= nodo.nodo_id %>"
                class="flex items-center space-x-1 bg-[#D87E0A] text-white text-xs font-semibold rounded px-3 py-1 shadow hover:bg-[#b56408]">
                <i class="fas fa-eye"></i>
                <span>Ver</span>
              </a>
              <a href="/admin/nodos/eliminar/<%= nodo.nodo_id %>"
                class="flex items-center space-x-1 bg-[#D92B27] text-white text-xs font-semibold rounded px-3 py-1 shadow hover:bg-red-700">
                <i class="fas fa-trash-alt"></i>
                <span>Eliminar</span>
              </a>

              <% if (nodo.colmena_lat && nodo.colmena_lng) { %>
                <a href="https://www.google.com/maps?q=<%= nodo.colmena_lat %>,<%= nodo.colmena_lng %>"
                  target="_blank"
                  class="flex items-center space-x-1 bg-green-500 text-white text-xs font-semibold rounded px-3 py-1 shadow hover:bg-green-600">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>Mapa</span>
                </a>
              <% } else if (nodo.estacion_lat && nodo.estacion_lng) { %>
                <a href="https://www.google.com/maps?q=<%= nodo.estacion_lat %>,<%= nodo.estacion_lng %>"
                  target="_blank"
                  class="flex items-center space-x-1 bg-green-500 text-white text-xs font-semibold rounded px-3 py-1 shadow hover:bg-green-600">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>Mapa</span>
                </a>
              <% } %>

            </div>

          </article>
        <% }) %>
      <% } else { %>
        <p class="text-center text-gray-500 col-span-3">No hay nodos registrados.</p>
      <% } %>
    </div>
  </div>
</section>
