<section class="flex flex-col gap-6 max-w-3xl w-full">
  <h1 class="font-bold text-lg">Configuración de perfil</h1>
  <form id="perfilForm" class="space-y-6">
    <!-- INFO USUARIO -->
    <fieldset class="bg-white rounded-md shadow-md p-6 space-y-4">
      <legend class="flex items-center gap-2 font-semibold text-[#7F4F00] text-base">
        <i class="fas fa-user"></i> Información del Usuario
      </legend>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="flex flex-col">
          <label for="nombre" class="text-xs font-normal mb-1">Nombre</label>
          <input type="text" id="nombre" name="nombre" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
        <div class="flex flex-col">
          <label for="apellido" class="text-xs font-normal mb-1">Apellido</label>
          <input type="text" id="apellido" name="apellido" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
        <div class="flex flex-col">
          <label for="rol" class="text-xs font-normal mb-1">Rol</label>
          <input type="text" id="rol" name="rol" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
        <div class="flex flex-col">
          <label for="estado" class="text-xs font-normal mb-1">Estado</label>
          <input type="text" id="estado" name="estado" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
        <div class="flex flex-col">
          <label for="comuna" class="text-xs font-normal mb-1">Comuna</label>
          <input type="text" id="comuna" name="comuna" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
      </div>
    </fieldset>

    <!-- CAMBIO CLAVE (solo visual) -->
    <fieldset class="bg-white rounded-md shadow-md p-6 space-y-4 max-w-md">
      <legend class="flex items-center gap-2 font-semibold text-[#7F4F00] text-base">
        <i class="fas fa-lock"></i> Modificar clave
      </legend>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="flex flex-col">
          <label for="clave-antigua" class="text-xs font-normal mb-1">Clave Antigua</label>
          <input type="password" id="clave-antigua" name="clave-antigua" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
        <div class="flex flex-col">
          <label for="nueva-clave" class="text-xs font-normal mb-1">Nueva clave</label>
          <input type="password" id="nueva-clave" name="nueva-clave" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
        </div>
      </div>
      <div class="flex flex-col max-w-xs">
        <label for="repetir-clave" class="text-xs font-normal mb-1">Repetir clave nueva</label>
        <input type="password" id="repetir-clave" name="repetir-clave" readonly class="bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-xs"/>
      </div>
      <button type="button" class="mt-2 w-max bg-[#F9D77E] border border-[#C97800] rounded-md px-4 py-2 text-xs font-semibold text-[#7F4F00] cursor-not-allowed opacity-50">
        Guardar Cambios
      </button>
    </fieldset>
  </form>
</section>

<!-- LOGO LATERAL -->
<aside class="flex-shrink-0 flex items-center justify-center max-w-xs">
  <img src="res/logo-removebg-preview.png" class="max-w-full h-auto" height="240" width="300"/>
</aside>

<script>
  // Cargar datos usuario (solo lectura)
  async function cargarUsuario() {
    try {
      const res = await fetch('/api/usuario');
      const usuario = await res.json();
      document.getElementById("nombre").value = usuario.nombre || "";
      document.getElementById("apellido").value = usuario.apellido || "";
      document.getElementById("rol").value = usuario.rol || "";
      document.getElementById("estado").value = usuario.activo == 1 ? "Activo" : "Inactivo";
      document.getElementById("comuna").value = usuario.comuna || "";
    } catch(e){ console.error(e); }
  }
  document.addEventListener("DOMContentLoaded", cargarUsuario);
</script>